<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"> <!--Adciona o placeholder no input-->
    <h:head>
        <title>TodoApp - Cadastro</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <style>
            .error{
                color: red;
                font-size: 12px;
            }
        </style>
    </h:head>
<h:body>

    <nav class="navbar navbar-expand-sm navbar-light bg-light">
      <!-- Brand/logo -->
          <h:form>
              <h:commandLink styleClass="navbar-brand" value="TodoApp" action="login" />
          </h:form>


    </nav>

    <div class="container col-md-4" style="margin-top: 30px;">
        <h:form class="form-group">
            <h2>Cadastro</h2>
            <hr/>
            <div class="form-group">
                <label for="name">Primeiro nome:</label>
                <h:inputText value="#{cadastroBean.nome}" class="form-control" id="name" required="true" requiredMessage="Nome é requerido"/>
                <h:message styleClass="error" for="name"/>
            </div>
            <div class="form-group">
                <label for="lname">Último Nome:</label>
                <h:inputText value="#{cadastroBean.ultimo_nome}" class="form-control" id="lname" required="true" requiredMessage="Último nome é requerido"/>
                <h:message for="lname" styleClass="error"/>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <h:inputText validator="#{cadastroBean.validateEmail}" binding="#{cadastroBean.email_input}" value="#{cadastroBean.email}" class="form-control" id="email" required="true" requiredMessage="Email é requerido"/>
                <h:message styleClass="error" id="email_error" for="email"/>
            </div>
            <div class="form-group">
                <label for="pwd">Senha:</label>
                <!-- binding usado para passar variavel para validator -->
                <h:inputSecret validator="#{cadastroBean.validateSenha1}" binding="#{senha_input}" value="#{cadastroBean.senha}" class="form-control" id="pwd" required="true" requiredMessage="Senha é requerida"/>
                <h:message styleClass="error" for="pwd"/>                
            </div>
            <div class="form-group">
                <label for="pwd">Confirme a senha:</label>
                <h:inputSecret validator="#{cadastroBean.validateSenha2}" value="#{cadastroBean.repet_senha}" class="form-control" id="cpwd" required="true" requiredMessage="Confirmação da senha é requerida">
                    <!-- atributo que é passado para validator -->
                    <f:attribute name="senha_input" value="#{senha_input}" />
                </h:inputSecret>
                <h:message styleClass="error" for="cpwd"/>
            </div>
            <div class="clearfix">
                <h:button class="btn btn-secondary float-left" value="Voltar" outcome="login"/>
                <h:commandButton id="cadastro" value="Cadastrar" class="btn btn-primary float-right" action="#{cadastroBean.cadastraUsuario()}"/>
                <p:defaultCommand target="cadastro" />
            </div>            
        </h:form>
    </div>

</h:body>
</html>
